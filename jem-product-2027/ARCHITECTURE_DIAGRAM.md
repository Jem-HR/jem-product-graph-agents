# HR Admin Deep Agent - Architecture Diagrams

Complete visual documentation of the HR Admin system architecture.

---

## 1. System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACES                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  LangGraph Studio  â”‚  â”‚   Python API     â”‚  â”‚   REST API (HTTP)    â”‚   â”‚
â”‚  â”‚   (Web UI)         â”‚  â”‚   (Direct Call)  â”‚  â”‚   (Port 2024)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                     â”‚                         â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       HR ADMIN SUPERVISOR AGENT                              â”‚
â”‚                         (hr_admin_graph.py)                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Flow: authenticate_admin â†’ classify_request â†’ route_to_specialist â”‚    â”‚
â”‚  â”‚        â†’ [confirm_with_human] â†’ execute_action                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  ğŸ“Š Enhanced Classification System:                                         â”‚
â”‚  - Claude Haiku 4.5 with structured output                                  â”‚
â”‚  - Confidence scoring (0.0 - 1.0)                                           â”‚
â”‚  - Chain-of-thought reasoning                                               â”‚
â”‚  - Conversation context awareness                                           â”‚
â”‚  - Multi-intent detection                                                   â”‚
â”‚                                                                              â”‚
â”‚  ğŸ”€ Routes to 4 Specialized Subagents:                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚            â”‚            â”‚            â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Query    â”‚  â”‚  Employee â”‚ â”‚   Leave   â”‚ â”‚   Bulk/Smart      â”‚
     â”‚   Agent    â”‚  â”‚   CRUD    â”‚ â”‚ Managementâ”‚ â”‚   CSV Agents      â”‚
     â”‚            â”‚  â”‚   Agent   â”‚ â”‚   Agent   â”‚ â”‚                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚             â”‚             â”‚
            â”‚              â”‚             â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TOOLS LAYER                                         â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Neo4j      â”‚  â”‚  Leave Mgmt  â”‚  â”‚     CSV      â”‚  â”‚ Authorization â”‚  â”‚
â”‚  â”‚   CRUD       â”‚  â”‚    Tools     â”‚  â”‚  Processing  â”‚  â”‚   & Audit     â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚               â”‚  â”‚
â”‚  â”‚ â€¢ create     â”‚  â”‚ â€¢ create_req â”‚  â”‚ â€¢ parse_csv  â”‚  â”‚ â€¢ check_perm  â”‚  â”‚
â”‚  â”‚ â€¢ update     â”‚  â”‚ â€¢ approve    â”‚  â”‚ â€¢ clean_data â”‚  â”‚ â€¢ log_audit   â”‚  â”‚
â”‚  â”‚ â€¢ delete     â”‚  â”‚ â€¢ reject     â”‚  â”‚ â€¢ batch_ops  â”‚  â”‚ â€¢ get_logs    â”‚  â”‚
â”‚  â”‚ â€¢ update_rel â”‚  â”‚ â€¢ balance    â”‚  â”‚ â€¢ fuzzy_map  â”‚  â”‚               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NEO4J GRAPH DATABASE                                  â”‚
â”‚                         (Employer ID 189 Scoped)                             â”‚
â”‚                                                                              â”‚
â”‚  Nodes:                      Relationships:                                 â”‚
â”‚  â€¢ Employee                  â€¢ REPORTS_TO (manager hierarchy)               â”‚
â”‚  â€¢ Employer                  â€¢ WORKS_FOR (employment)                       â”‚
â”‚  â€¢ Division                  â€¢ IN_DIVISION (team membership)                â”‚
â”‚  â€¢ Branch                    â€¢ ASSIGNED_TO_BRANCH (location)                â”‚
â”‚  â€¢ LeaveRequest              â€¢ SUBMITTED_LEAVE (leave requests)             â”‚
â”‚  â€¢ LeaveBalance              â€¢ APPROVED_LEAVE (approvals)                   â”‚
â”‚  â€¢ AuditLog                  â€¢ HAS_BALANCE (leave balances)                 â”‚
â”‚                              â€¢ PERFORMED (audit trail)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. HR Admin Supervisor Agent - Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER MESSAGE: "Show pending leave approval lines"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NODE 1: authenticate_admin                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                           â”‚
â”‚  Input: User's first message (or existing admin_context)                 â”‚
â”‚                                                                           â”‚
â”‚  Process:                                                                 â”‚
â”‚  1. Check if admin_context exists in state                               â”‚
â”‚  2. If yes â†’ Skip to classify                                            â”‚
â”‚  3. If no â†’ Query Neo4j for employee ID 101487                           â”‚
â”‚     MATCH (admin:Employee {id: 101487})                                  â”‚
â”‚     RETURN name, role, employer_id                                       â”‚
â”‚  4. Determine role:                                                      â”‚
â”‚     - ID 101487 â†’ hr_admin                                               â”‚
â”‚     - Has reports â†’ hr_manager                                           â”‚
â”‚     - Else â†’ employee                                                    â”‚
â”‚                                                                           â”‚
â”‚  Output:                                                                  â”‚
â”‚  admin_context = {                                                        â”‚
â”‚    id: 101487,                                                            â”‚
â”‚    first_name: "Thamsanqa",                                               â”‚
â”‚    last_name: "Moyo",                                                     â”‚
â”‚    role: "hr_admin",                                                      â”‚
â”‚    employer_id: 189  â† KEY for multi-tenant scoping                      â”‚
â”‚  }                                                                         â”‚
â”‚  operation_type = "classify"                                              â”‚
â”‚                                                                           â”‚
â”‚  Greeting: "Welcome, Thamsanqa Moyo! (Role: hr_admin)"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NODE 2: classify_request (ENHANCED WITH CONFIDENCE SCORING)              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                           â”‚
â”‚  Input: "Show pending leave approval lines"                              â”‚
â”‚                                                                           â”‚
â”‚  Step 1: Extract conversation context                                    â”‚
â”‚    - Mentioned employees: {}                                             â”‚
â”‚    - Previous operations: []                                             â”‚
â”‚    - Unresolved references: []                                           â”‚
â”‚                                                                           â”‚
â”‚  Step 2: Build classification prompt                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚ Admin: Thamsanqa Moyo (hr_admin, employer 189)      â”‚             â”‚
â”‚    â”‚ Conversation history: "Welcome message..."          â”‚             â”‚
â”‚    â”‚ Request: "Show pending leave approval lines"        â”‚             â”‚
â”‚    â”‚                                                      â”‚             â”‚
â”‚    â”‚ Classify into: query, crud, leave, or bulk          â”‚             â”‚
â”‚    â”‚ Use 6-step chain-of-thought reasoning               â”‚             â”‚
â”‚    â”‚ Return structured output with confidence            â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                           â”‚
â”‚  Step 3: Call Claude Haiku with structured output                        â”‚
â”‚    Model: claude-haiku-4-5-20251001                                      â”‚
â”‚    with_structured_output(ClassificationResult)                          â”‚
â”‚                                                                           â”‚
â”‚  Step 4: Claude's reasoning (Chain-of-Thought)                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚ Step 1: Entities â†’ "pending", "leave", "approval"   â”‚             â”‚
â”‚    â”‚ Step 2: Action â†’ Viewing pending leave requests     â”‚             â”‚
â”‚    â”‚ Step 3: Scope â†’ Leave management operation          â”‚             â”‚
â”‚    â”‚ Step 4: Ambiguity â†’ None detected                   â”‚             â”‚
â”‚    â”‚ Step 5: Confidence â†’ 0.95 (high)                    â”‚             â”‚
â”‚    â”‚ Step 6: Edge cases â†’ None                           â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                           â”‚
â”‚  Output:                                                                  â”‚
â”‚  {                                                                         â”‚
â”‚    primary_intent: "leave",                                               â”‚
â”‚    confidence: 0.95,                                                      â”‚
â”‚    reasoning: "User wants to view pending leave requests...",            â”‚
â”‚    secondary_intent: null,                                                â”‚
â”‚    requires_clarification: false,                                         â”‚
â”‚    extracted_entities: {keywords: ["pending", "leave", "approval"]}      â”‚
â”‚  }                                                                         â”‚
â”‚                                                                           â”‚
â”‚  Decision: Confidence â‰¥ 0.9 â†’ Proceed to routing                         â”‚
â”‚  operation_type = "leave"                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NODE 3: route_to_specialist                                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                           â”‚
â”‚  Input: operation_type = "leave"                                         â”‚
â”‚                                                                           â”‚
â”‚  Process:                                                                 â”‚
â”‚  1. Extract user message again                                           â”‚
â”‚  2. Build extraction prompt for leave operations                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚ Request: "Show pending leave approval lines"        â”‚             â”‚
â”‚    â”‚                                                      â”‚             â”‚
â”‚    â”‚ Extract operation details:                          â”‚             â”‚
â”‚    â”‚ - operation: create/approve/reject/balance/         â”‚             â”‚
â”‚    â”‚              history/pending                        â”‚             â”‚
â”‚    â”‚ - leave_data: {employee_id, dates, etc.}           â”‚             â”‚
â”‚    â”‚                                                      â”‚             â”‚
â”‚    â”‚ Common phrases for "pending":                       â”‚             â”‚
â”‚    â”‚ - "leave approval lines" âœ“                          â”‚             â”‚
â”‚    â”‚ - "pending approvals"                                â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                           â”‚
â”‚  3. Claude extracts:                                                      â”‚
â”‚    {                                                                      â”‚
â”‚      operation: "pending",                                                â”‚
â”‚      leave_data: {manager_id: 101487}  â† Auto-populated                 â”‚
â”‚    }                                                                      â”‚
â”‚                                                                           â”‚
â”‚  4. Check if requires approval:                                          â”‚
â”‚    "pending" â†’ Read-only â†’ NO approval needed                            â”‚
â”‚                                                                           â”‚
â”‚  5. Call leave_management_agent directly                                 â”‚
â”‚    â†“                                                                      â”‚
â”‚    leave_management_agent({                                               â”‚
â”‚      operation: "pending",                                                â”‚
â”‚      admin_id: 101487,                                                    â”‚
â”‚      leave_data: {manager_id: 101487},                                   â”‚
â”‚      employer_id: 189  â† Multi-tenant scoping                            â”‚
â”‚    })                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUBAGENT: leave_management_agent                                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                           â”‚
â”‚  1. Check authorization                                                   â”‚
â”‚    check_permission(101487, Permission.VIEW_TEAM_LEAVE, employer_id=189) â”‚
â”‚    â†’ authorized: true, role: "hr_admin"                                  â”‚
â”‚                                                                           â”‚
â”‚  2. Call get_pending_leave_requests tool                                 â”‚
â”‚    â†“                                                                      â”‚
â”‚    MATCH (report:Employee)-[:REPORTS_TO]->(manager:Employee {id: 101487})â”‚
â”‚    WHERE report.employer_id = 189 AND manager.employer_id = 189          â”‚
â”‚    MATCH (report)-[:SUBMITTED_LEAVE]->(lr:LeaveRequest {status:'pending'})â”‚
â”‚    RETURN leave requests...                                              â”‚
â”‚                                                                           â”‚
â”‚  3. Format results                                                        â”‚
â”‚    "No pending leave requests for approval"                              â”‚
â”‚    (Or formatted list if any exist)                                      â”‚
â”‚                                                                           â”‚
â”‚  Output: Formatted response string                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Return to User      â”‚
                    â”‚  "No pending leave   â”‚
                    â”‚  requests for        â”‚
                    â”‚  approval"           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Subagent Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HR SUPERVISOR AGENT                                  â”‚
â”‚                   (Orchestrates all operations)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚               â”‚               â”‚                â”‚              â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Query   â”‚  â”‚   Employee  â”‚  â”‚  Leave   â”‚  â”‚    Bulk Processing      â”‚
â”‚  Agent   â”‚  â”‚    CRUD     â”‚  â”‚  Mgmt    â”‚  â”‚    Agents               â”‚
â”‚          â”‚  â”‚   Agent     â”‚  â”‚  Agent   â”‚  â”‚                         â”‚
â”‚          â”‚  â”‚             â”‚  â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ Read-    â”‚  â”‚ Create      â”‚  â”‚ Requests â”‚  â”‚  â”‚ Standard Bulk   â”‚    â”‚
â”‚ only     â”‚  â”‚ Update      â”‚  â”‚ Approvalsâ”‚  â”‚  â”‚ (Clean CSVs)    â”‚    â”‚
â”‚ queries  â”‚  â”‚ Delete      â”‚  â”‚ Balances â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚  â”‚ Soft/Hard   â”‚  â”‚ Pending  â”‚  â”‚                         â”‚
â”‚          â”‚  â”‚             â”‚  â”‚ History  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚          â”‚  â”‚             â”‚  â”‚          â”‚  â”‚  â”‚ Smart CSV       â”‚    â”‚
â”‚          â”‚  â”‚             â”‚  â”‚          â”‚  â”‚  â”‚ (Messy Data +   â”‚    â”‚
â”‚          â”‚  â”‚             â”‚  â”‚          â”‚  â”‚  â”‚  Planning)      â”‚    â”‚
â”‚          â”‚  â”‚             â”‚  â”‚          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚                â”‚
     â”‚               â”‚               â”‚                â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Authorization      â”‚
          â”‚   â€¢ check_permission â”‚
          â”‚   â€¢ log_audit_event  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚     Neo4j            â”‚
          â”‚   (employer_id=189)  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Subagent Responsibilities

| Agent | Operations | Approval Required | Tools Used |
|-------|------------|-------------------|------------|
| **Query Agent** | Read-only queries | No | `query_neo4j_cypher` |
| **CRUD Agent** | Create, update, delete employee | Yes (all) | `create_employee`, `update_employee`, `delete_employee` |
| **Leave Agent** | Create, approve, reject, balance, pending | Yes (create/approve/reject) | `create_leave_request`, `approve_leave_request`, etc. |
| **Bulk Agent** | CSV import (standard format) | Yes | `parse_employee_csv`, `batch_create_employees` |
| **Smart CSV** | CSV import (variable format + cleaning) | Yes | `inspect_csv`, `map_columns`, `clean_data`, batch ops |

---

## 3. Enhanced Classification System

```
                            User Message
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Extract Message & Context                                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  â€¢ Extract text from multimodal content                                â”‚
â”‚  â€¢ Build conversation history summary (last 3 exchanges)               â”‚
â”‚  â€¢ Extract entities from previous messages                             â”‚
â”‚    - Employee IDs mentioned                                            â”‚
â”‚    - Names mentioned                                                   â”‚
â”‚    - Dates referenced                                                  â”‚
â”‚  â€¢ Detect unresolved pronouns ("their", "them", etc.)                  â”‚
â”‚  â€¢ Resolve references using context                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Build Enhanced Prompt                                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  Prompt includes:                                                       â”‚
â”‚  â€¢ Admin context (name, role, employer_id)                             â”‚
â”‚  â€¢ Conversation history summary                                        â”‚
â”‚  â€¢ Previously mentioned entities                                       â”‚
â”‚  â€¢ Resolved message (pronouns replaced)                                â”‚
â”‚  â€¢ Category definitions with examples                                  â”‚
â”‚  â€¢ 6-step reasoning framework                                          â”‚
â”‚  â€¢ Edge case handling instructions                                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Claude Haiku Classification                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  Model: claude-haiku-4-5-20251001                                      â”‚
â”‚  Method: .with_structured_output(ClassificationResult)                 â”‚
â”‚                                                                         â”‚
â”‚  6-Step Reasoning:                                                      â”‚
â”‚  1. Extract entities: "pending", "leave", "approval lines"             â”‚
â”‚  2. Action type: Viewing information (not modifying)                   â”‚
â”‚  3. Scope: Leave management operation                                  â”‚
â”‚  4. Ambiguity: None (clear intent)                                     â”‚
â”‚  5. Confidence: 0.95 (high - clear keywords match)                     â”‚
â”‚  6. Edge cases: None apply                                             â”‚
â”‚                                                                         â”‚
â”‚  Structured Output:                                                     â”‚
â”‚  ClassificationResult(                                                  â”‚
â”‚    primary_intent = "leave",                                            â”‚
â”‚    confidence = 0.95,                                                   â”‚
â”‚    reasoning = "Step 1: Extracted 'pending leave approval'...",        â”‚
â”‚    secondary_intent = None,                                             â”‚
â”‚    requires_clarification = False,                                      â”‚
â”‚    extracted_entities = {                                               â”‚
â”‚      keywords: ["pending", "leave", "approval"],                        â”‚
â”‚      operation: "pending"                                               â”‚
â”‚    }                                                                    â”‚
â”‚  )                                                                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Confidence-Based Routing                                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                         â”‚
â”‚  Confidence: 0.95                                                       â”‚
â”‚                                                                         â”‚
â”‚  Decision Tree:                                                         â”‚
â”‚  â”Œâ”€ confidence â‰¥ 0.9 â”€â”€â”€â”€â”€â”€â”€â”€â†’ HIGH: Execute immediately âœ“             â”‚
â”‚  â”œâ”€ 0.6 â‰¤ confidence < 0.9 â”€â”€â†’ MEDIUM: Proceed (could confirm)         â”‚
â”‚  â””â”€ confidence < 0.6 â”€â”€â”€â”€â”€â”€â”€â”€â†’ LOW: Request clarification              â”‚
â”‚                                                                         â”‚
â”‚  Result: HIGH confidence â†’ Proceed to route_to_specialist              â”‚
â”‚  operation_type = "leave"                                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
              (Continue to routing...)
```

---

## 4. Data Flow - Bulk CSV Processing

```
User: "Process messy CSV from external HR system"
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Classifier detects:                                  â”‚
â”‚ - "CSV" â†’ bulk operation                            â”‚
â”‚ - "messy" â†’ complexity indicator                    â”‚
â”‚ Result: bulk + smart processing âœ“                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route to: smart_csv_agent                           â”‚
â”‚ (Planning-based with data cleaning)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Smart CSV Agent Workflow (LangGraph StateGraph)                 â”‚
â”‚                                                                  â”‚
â”‚  NODE 1: create_processing_plan                                 â”‚
â”‚    â”œâ”€ inspect_csv_structure()                                   â”‚
â”‚    â”œâ”€ Found: 5 rows, 6 columns                                  â”‚
â”‚    â”œâ”€ Columns: "First Name", "Surname", "Cell Number"...        â”‚
â”‚    â”œâ”€ Issues: Dirty mobiles, mixed case, salary formatting      â”‚
â”‚    â””â”€ Creates 8-step todo plan:                                 â”‚
â”‚        1. âœ… Inspect CSV structure                              â”‚
â”‚        2. â³ Map columns to schema                              â”‚
â”‚        3. â³ Clean Cell Number                                  â”‚
â”‚        4. â³ Clean E-mail Address                               â”‚
â”‚        5. â¸ Validate all records                                â”‚
â”‚        6. â¸ Batch create employees                              â”‚
â”‚        7. â¸ Initialize leave balances                           â”‚
â”‚        8. â¸ Generate report                                     â”‚
â”‚                                                                  â”‚
â”‚  NODE 2: map_columns_step                                       â”‚
â”‚    â”œâ”€ Fuzzy matching with Levenshtein distance                 â”‚
â”‚    â”œâ”€ "First Name" â†’ first_name (100% confidence)              â”‚
â”‚    â”œâ”€ "Surname" â†’ last_name (100% confidence)                  â”‚
â”‚    â”œâ”€ "Cell Number" â†’ mobile_number (70% confidence)           â”‚
â”‚    â”œâ”€ "Staff #" â†’ employee_no (80% confidence)                 â”‚
â”‚    â””â”€ Update todo: 2. âœ… Map columns to schema                 â”‚
â”‚                                                                  â”‚
â”‚  NODE 3: clean_data_step                                        â”‚
â”‚    â”œâ”€ For each record:                                          â”‚
â”‚    â”‚   â”œâ”€ clean_name_field("SMITH") â†’ "Smith"                  â”‚
â”‚    â”‚   â”œâ”€ clean_mobile_number("+27 82 111 2001") â†’ "27821112001"â”‚
â”‚    â”‚   â”œâ”€ clean_email_address("john@company.com") â†’ valid âœ“    â”‚
â”‚    â”‚   â””â”€ clean_salary_field("R 55,000") â†’ 55000               â”‚
â”‚    â”œâ”€ Results: 4 valid, 1 failed (invalid email)               â”‚
â”‚    â””â”€ Update todos: 3. âœ…, 4. âœ…, 5. âœ…                         â”‚
â”‚                                                                  â”‚
â”‚  NODE 4: process_batch_step                                     â”‚
â”‚    â”œâ”€ batch_create_employees(4 records, batch_size=100)        â”‚
â”‚    â”œâ”€ For each: Create Employee node + WORKS_FOR relationship  â”‚
â”‚    â”œâ”€ batch_initialize_leave_balances(4 employees, 2025)       â”‚
â”‚    â”œâ”€ Creates: annual (21), sick (10), family (3) balances     â”‚
â”‚    â””â”€ Update todos: 6. âœ…, 7. âœ…                                â”‚
â”‚                                                                  â”‚
â”‚  NODE 5: generate_report_step                                   â”‚
â”‚    â”œâ”€ save_processing_results()                                 â”‚
â”‚    â”‚   â”œâ”€ success.csv (4 records)                               â”‚
â”‚    â”‚   â”œâ”€ errors.csv (1 record: "mike@" invalid email)         â”‚
â”‚    â”‚   â””â”€ summary.txt (statistics)                              â”‚
â”‚    â”œâ”€ log_audit_event(admin=101487, op="bulk_employee_create") â”‚
â”‚    â””â”€ Update todos: 8. âœ…                                        â”‚
â”‚                                                                  â”‚
â”‚  Output: Summary with all todos marked complete                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Multi-Tenant Data Isolation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authentication                                                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                     â”‚
â”‚  Employee 101487 logs in                                           â”‚
â”‚    â†“                                                                â”‚
â”‚  MATCH (e:Employee {id: 101487})                                   â”‚
â”‚  RETURN e.employer_id  â†’ 189                                       â”‚
â”‚    â†“                                                                â”‚
â”‚  admin_context.employer_id = 189                                   â”‚
â”‚  (Stored in state, flows through all operations)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All Queries Auto-Scoped to Employer 189                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                     â”‚
â”‚  Query Agent:                                                       â”‚
â”‚    MATCH (e:Employee {employer_id: 189}) ...                       â”‚
â”‚    WHERE manager.employer_id = 189                                 â”‚
â”‚                                                                     â”‚
â”‚  CRUD Agent:                                                        â”‚
â”‚    MATCH (e:Employee {id: 22483, employer_id: 189})                â”‚
â”‚    // Can only update employees in employer 189                    â”‚
â”‚                                                                     â”‚
â”‚  Leave Agent:                                                       â”‚
â”‚    MATCH (e:Employee {id: 101487, employer_id: 189})               â”‚
â”‚    -[:HAS_BALANCE]->(lb:LeaveBalance)                              â”‚
â”‚    // Only access leave data for employer 189                      â”‚
â”‚                                                                     â”‚
â”‚  Bulk Agent:                                                        â”‚
â”‚    // Validates all employee_ids belong to employer 189            â”‚
â”‚    // Rejects cross-employer operations                            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Security Result:
âœ… Employee from Company A (employer 189) CANNOT access Company B data
âœ… Manager from Company A CANNOT approve leave for Company B employees
âœ… Bulk import for Company A CANNOT create employees in Company B
âœ… Queries scoped: "List all employees" â†’ Only employer 189 employees
```

---

## 6. Human-in-the-Loop Workflow

```
User: "Create employee John Doe with salary 75000"
  â†“
Classified as: "crud" (high confidence)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CRUD Agent checks: "create" + "salary" field present       â”‚
â”‚ â†’ requires_approval = TRUE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sets pending_action:                                        â”‚
â”‚ {                                                            â”‚
â”‚   subagent: "employee_crud",                                â”‚
â”‚   operation: "create",                                      â”‚
â”‚   data: {                                                   â”‚
â”‚     first_name: "John",                                     â”‚
â”‚     last_name: "Doe",                                       â”‚
â”‚     salary: 75000,                                          â”‚
â”‚     employer_id: 189  â† Auto-populated                      â”‚
â”‚   }                                                          â”‚
â”‚ }                                                            â”‚
â”‚ operation_type = "confirm"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NODE: confirm_with_human                                    â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                              â”‚
â”‚ Uses: interrupt() from LangGraph                            â”‚
â”‚                                                              â”‚
â”‚ Shows user:                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ Action Requires Approval:                      â”‚          â”‚
â”‚ â”‚                                                 â”‚          â”‚
â”‚ â”‚ Subagent: employee_crud                        â”‚          â”‚
â”‚ â”‚ Operation: create                               â”‚          â”‚
â”‚ â”‚ Data: {                                         â”‚          â”‚
â”‚ â”‚   "first_name": "John",                        â”‚          â”‚
â”‚ â”‚   "last_name": "Doe",                          â”‚          â”‚
â”‚ â”‚   "salary": 75000,                             â”‚          â”‚
â”‚ â”‚   "employer_id": 189                           â”‚          â”‚
â”‚ â”‚ }                                               â”‚          â”‚
â”‚ â”‚                                                 â”‚          â”‚
â”‚ â”‚ Type 'approve' to proceed or 'reject' to cancelâ”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                              â”‚
â”‚ â¸ EXECUTION PAUSED - Waiting for human decision            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚
    User approves      User rejects
         â”‚                  â”‚
         â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ approved=true  â”‚   â”‚approved=falseâ”‚
â”‚ operation_type â”‚   â”‚operation_typeâ”‚
â”‚ = "execute"    â”‚   â”‚ = "end"      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Execute     â”‚       â”‚ Cancel &    â”‚
â”‚ Create      â”‚       â”‚ Inform User â”‚
â”‚ Employee    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   â†“         â”‚
â”‚ Audit Log   â”‚
â”‚   â†“         â”‚
â”‚ Success Msg â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Neo4j Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EMPLOYEE MANAGEMENT SCHEMA                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  (:Employee)                         (:Employer)                    â”‚
â”‚  â”œâ”€ id: int (unique)                 â”œâ”€ id: int                     â”‚
â”‚  â”œâ”€ uuid: str                        â”œâ”€ company_name: str           â”‚
â”‚  â”œâ”€ first_name: str                  â””â”€ status: str                 â”‚
â”‚  â”œâ”€ last_name: str                                                  â”‚
â”‚  â”œâ”€ mobile_number: str (27XXXXXXXXX) (:Division)                    â”‚
â”‚  â”œâ”€ email: str                       â”œâ”€ id: int                     â”‚
â”‚  â”œâ”€ status: str                      â””â”€ name: str                   â”‚
â”‚  â”œâ”€ employer_id: int â˜…               (:Branch)                       â”‚
â”‚  â”œâ”€ employee_no: str                 â”œâ”€ id: int                     â”‚
â”‚  â”œâ”€ salary: float                    â””â”€ name: str                   â”‚
â”‚  â”œâ”€ created_at: datetime                                            â”‚
â”‚  â””â”€ updated_at: datetime                                            â”‚
â”‚                                                                      â”‚
â”‚  Relationships:                                                      â”‚
â”‚  (:Employee)-[:REPORTS_TO]->(:Employee)        Manager hierarchy    â”‚
â”‚  (:Employee)-[:WORKS_FOR]->(:Employer)         Employment           â”‚
â”‚  (:Employee)-[:IN_DIVISION]->(:Division)       Team membership      â”‚
â”‚  (:Employee)-[:ASSIGNED_TO_BRANCH]->(:Branch)  Location             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       LEAVE MANAGEMENT SCHEMA                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  (:LeaveRequest)                     (:LeaveBalance)                â”‚
â”‚  â”œâ”€ id: int (unique)                 â”œâ”€ employee_id: int            â”‚
â”‚  â”œâ”€ employee_id: int                 â”œâ”€ year: int                   â”‚
â”‚  â”œâ”€ leave_type: str                  â”œâ”€ leave_type: str             â”‚
â”‚  â”œâ”€ start_date: date                 â”œâ”€ total_days: float           â”‚
â”‚  â”œâ”€ end_date: date                   â”œâ”€ used_days: float            â”‚
â”‚  â”œâ”€ days_requested: float            â”œâ”€ pending_days: float         â”‚
â”‚  â”œâ”€ status: str (pending/approved)   â”œâ”€ remaining_days: float       â”‚
â”‚  â”œâ”€ reason: str                      â””â”€ updated_at: datetime        â”‚
â”‚  â”œâ”€ rejection_reason: str                                           â”‚
â”‚  â”œâ”€ approved_by_id: int              Unique constraint:             â”‚
â”‚  â”œâ”€ created_at: datetime             (employee_id, year, leave_type)â”‚
â”‚  â””â”€ updated_at: datetime                                            â”‚
â”‚                                                                      â”‚
â”‚  Leave Types: annual, sick, family, unpaid, maternity, paternity,   â”‚
â”‚               study, compassionate                                  â”‚
â”‚                                                                      â”‚
â”‚  Relationships:                                                      â”‚
â”‚  (:Employee)-[:SUBMITTED_LEAVE]->(:LeaveRequest)   Employee's requestâ”‚
â”‚  (:Employee)-[:APPROVED_LEAVE]->(:LeaveRequest)    Manager approved â”‚
â”‚  (:Employee)-[:HAS_BALANCE]->(:LeaveBalance)       Leave allocation â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AUDIT LOGGING SCHEMA                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  (:AuditLog)                                                        â”‚
â”‚  â”œâ”€ id: int (unique)                                                â”‚
â”‚  â”œâ”€ admin_id: int                                                   â”‚
â”‚  â”œâ”€ operation: str (create_employee, approve_leave, etc.)          â”‚
â”‚  â”œâ”€ target_entity: str (Employee, LeaveRequest)                    â”‚
â”‚  â”œâ”€ target_id: int                                                  â”‚
â”‚  â”œâ”€ changes: json                                                   â”‚
â”‚  â”œâ”€ success: bool                                                   â”‚
â”‚  â”œâ”€ error_message: str                                              â”‚
â”‚  â””â”€ timestamp: datetime                                             â”‚
â”‚                                                                      â”‚
â”‚  Relationships:                                                      â”‚
â”‚  (:Employee)-[:PERFORMED]->(:AuditLog)  Who did what when           â”‚
â”‚                                                                      â”‚
â”‚  Tracks: All CRUD operations, leave approvals, bulk imports         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Technology Stack Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LangGraph Studio (Web UI)   â”‚   Python API   â”‚   REST API      â”‚
â”‚  - Visual graph debugging    â”‚   - Direct     â”‚   - Port 2024   â”‚
â”‚  - State inspection          â”‚     ainvoke()  â”‚   - Streaming   â”‚
â”‚  - Human-in-the-loop UI      â”‚   - Testing    â”‚   - Production  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORCHESTRATION LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LangGraph                                                       â”‚
â”‚  - StateGraph for workflow management                            â”‚
â”‚  - Conditional routing                                           â”‚
â”‚  - State persistence (automatic in Studio)                       â”‚
â”‚  - Interrupt support for human-in-the-loop                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AGENT LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LangChain                                                       â”‚
â”‚  - Tool calling framework                                        â”‚
â”‚  - Message history management                                    â”‚
â”‚  - Structured output with Pydantic                               â”‚
â”‚  - Async tool execution                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LLM LAYER                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Claude Haiku 4.5 (claude-haiku-4-5-20251001)                   â”‚
â”‚  - Classification: 1-2 sec                                       â”‚
â”‚  - Extraction: 1-2 sec                                           â”‚
â”‚  - Cypher generation: 1-2 sec                                    â”‚
â”‚  - Cost: $0.002 per classification                               â”‚
â”‚                                                                  â”‚
â”‚  Anthropic API                                                   â”‚
â”‚  - Streaming support                                             â”‚
â”‚  - Tool calling                                                  â”‚
â”‚  - Structured output                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA PROCESSING LAYER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pandas - CSV parsing and manipulation                          â”‚
â”‚  Phonenumbers - Mobile number validation (20+ formats)          â”‚
â”‚  Email-validator - Email validation                             â”‚
â”‚  Python-Levenshtein - Fuzzy column matching (90+ variations)    â”‚
â”‚  Pydantic - Data validation and schemas                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Neo4j Aura (Graph Database)                                    â”‚
â”‚  - Employee nodes and relationships                             â”‚
â”‚  - Leave management schema                                      â”‚
â”‚  - Audit logs                                                   â”‚
â”‚  - Cypher query language                                        â”‚
â”‚  - ACID transactions                                            â”‚
â”‚  - Async Python driver                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Request Flow Example: "Show my leave balance"

```
Step 1: User sends message
        "Show my leave balance"
           â†“
Step 2: authenticate_admin
        Already authenticated â†’ admin_context exists
        {id: 101487, role: "hr_admin", employer_id: 189}
           â†“
Step 3: classify_request
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Context extraction:                      â”‚
        â”‚ - No conversation history                â”‚
        â”‚ - No entities mentioned                  â”‚
        â”‚                                          â”‚
        â”‚ Enhanced prompt to Claude Haiku:         â”‚
        â”‚ "Analyze: 'Show my leave balance'"      â”‚
        â”‚ "Use 6-step reasoning"                   â”‚
        â”‚                                          â”‚
        â”‚ Claude responds:                         â”‚
        â”‚ {                                        â”‚
        â”‚   primary_intent: "leave",               â”‚
        â”‚   confidence: 0.95,                      â”‚
        â”‚   reasoning: "Keywords 'my', 'leave',    â”‚
        â”‚               'balance' indicate user    â”‚
        â”‚               wants to check their own   â”‚
        â”‚               leave balance - a leave    â”‚
        â”‚               management operation",     â”‚
        â”‚   extracted_entities: {                  â”‚
        â”‚     self_service: true,                  â”‚
        â”‚     operation_hint: "balance"            â”‚
        â”‚   }                                      â”‚
        â”‚ }                                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
Step 4: route_to_specialist
        operation_type = "leave"

        Extraction prompt to Claude:
        "Extract leave operation from: 'Show my leave balance'"

        Claude extracts:
        {
          operation: "balance",
          leave_data: {employee_id: 101487}  â† Auto-populated
        }

        No approval required (read-only)
           â†“
Step 5: leave_management_agent
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ check_permission(                        â”‚
        â”‚   admin_id=101487,                       â”‚
        â”‚   permission=VIEW_LEAVE,                 â”‚
        â”‚   employer_id=189                        â”‚
        â”‚ )                                        â”‚
        â”‚ â†’ authorized: true                       â”‚
        â”‚                                          â”‚
        â”‚ get_leave_balance({                      â”‚
        â”‚   employee_id: 101487,                   â”‚
        â”‚   year: 2025                             â”‚
        â”‚ })                                       â”‚
        â”‚   â†“                                      â”‚
        â”‚ MATCH (e:Employee {id: 101487,           â”‚
        â”‚        employer_id: 189})                â”‚
        â”‚ -[:HAS_BALANCE]->(lb:LeaveBalance)       â”‚
        â”‚ WHERE lb.year = 2025                     â”‚
        â”‚ RETURN lb...                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
Step 6: Format response
        "**Leave Balance for Employee 101487 (Year 2025):**

        **Annual Leave:**
        - Total: 21.0 days
        - Used: 0.0 days
        - Pending: 0.0 days
        - Remaining: 21.0 days

        **Sick Leave:**
        - Total: 10.0 days
        - Used: 0.0 days
        - Pending: 0.0 days
        - Remaining: 10.0 days

        **Family Leave:**
        - Total: 3.0 days
        - Used: 0.0 days
        - Pending: 0.0 days
        - Remaining: 3.0 days"
           â†“
Step 7: Return to user
        Total time: ~8-10 seconds
        - Classification: ~1.5s
        - Extraction: ~1.5s
        - DB query: ~2s
        - Formatting: ~0.5s
        - Network: ~3s
```

---

## 10. Comparison: Simple vs Smart Bulk Processing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User: "Import employees from clean_export.csv"                         â”‚
â”‚  Classifier detects: "import" + "CSV" â†’ bulk (no complexity indicators) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Standard Bulk Agentâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Parse CSV                 â”‚
    â”‚    â”œâ”€ Expect exact columns  â”‚
    â”‚    â”œâ”€ first_name, last_name â”‚
    â”‚    â””â”€ Fail if wrong format  â”‚
    â”‚                              â”‚
    â”‚ 2. Validate                  â”‚
    â”‚    â””â”€ Strict validation     â”‚
    â”‚                              â”‚
    â”‚ 3. Batch create              â”‚
    â”‚    â””â”€ 100 records/batch     â”‚
    â”‚                              â”‚
    â”‚ 4. Report                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    Speed: Fast (~25 records/sec)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User: "Process messy CSV from external HR - needs cleaning"            â”‚
â”‚  Classifier detects: "CSV" + "messy" + "cleaning" â†’ bulk + smart        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Smart CSV Agent   â”‚
         â”‚  (With Planning)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ TODO 1: Inspect CSV âœ“                     â”‚
    â”‚   â”œâ”€ Columns: "First Name", "Surname"... â”‚
    â”‚   â”œâ”€ Found dirty data patterns           â”‚
    â”‚   â””â”€ Create 8-step plan                  â”‚
    â”‚                                           â”‚
    â”‚ TODO 2: Map columns âœ“                    â”‚
    â”‚   â”œâ”€ Fuzzy match with 90+ variations     â”‚
    â”‚   â”œâ”€ "First Name" â†’ first_name (100%)    â”‚
    â”‚   â””â”€ "Cell Number" â†’ mobile_number (70%) â”‚
    â”‚                                           â”‚
    â”‚ TODO 3: Clean mobiles âœ“                  â”‚
    â”‚   â”œâ”€ "+27 82..." â†’ "27821234567"         â”‚
    â”‚   â”œâ”€ "082-..." â†’ "27821234567"           â”‚
    â”‚   â””â”€ Remove formatting                    â”‚
    â”‚                                           â”‚
    â”‚ TODO 4: Clean emails âœ“                   â”‚
    â”‚   â”œâ”€ Validate format                     â”‚
    â”‚   â””â”€ Detect invalid (reject)             â”‚
    â”‚                                           â”‚
    â”‚ TODO 5: Validate âœ“                       â”‚
    â”‚   â”œâ”€ 4/5 passed                          â”‚
    â”‚   â””â”€ 1/5 failed (invalid email)          â”‚
    â”‚                                           â”‚
    â”‚ TODO 6: Batch create âœ“                   â”‚
    â”‚   â””â”€ Import 4 valid records              â”‚
    â”‚                                           â”‚
    â”‚ TODO 7: Init leave âœ“                     â”‚
    â”‚   â””â”€ Create balances for 4 employees     â”‚
    â”‚                                           â”‚
    â”‚ TODO 8: Generate report âœ“                â”‚
    â”‚   â”œâ”€ success.csv (4 records)             â”‚
    â”‚   â”œâ”€ errors.csv (1 record)               â”‚
    â”‚   â””â”€ summary.txt                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    Speed: Slower (~15 records/sec) but handles messy data
```

---

## 11. Security & Authorization Flow

```
                        Every Operation
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  authorization.check_permission()                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                  â”‚
â”‚  Input:                                                          â”‚
â”‚  - admin_id: 101487                                             â”‚
â”‚  - permission: CREATE_EMPLOYEE (example)                        â”‚
â”‚  - employer_id: 189                                             â”‚
â”‚                                                                  â”‚
â”‚  Step 1: Load admin from Neo4j                                  â”‚
â”‚    MATCH (admin:Employee {id: 101487})                          â”‚
â”‚    RETURN role, employer_id, status                             â”‚
â”‚                                                                  â”‚
â”‚  Step 2: Determine role                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚    â”‚ CASE                                  â”‚                   â”‚
â”‚    â”‚   WHEN admin.id = 101487              â”‚                   â”‚
â”‚    â”‚     THEN 'hr_admin'                   â”‚                   â”‚
â”‚    â”‚   WHEN has_reports > 0                â”‚                   â”‚
â”‚    â”‚     THEN 'hr_manager'                 â”‚                   â”‚
â”‚    â”‚   ELSE 'employee'                     â”‚                   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚  Step 3: Check permissions matrix                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚    â”‚ Role: hr_admin                                  â”‚         â”‚
â”‚    â”‚                                                 â”‚         â”‚
â”‚    â”‚ Permissions:                                    â”‚         â”‚
â”‚    â”‚ âœ… CREATE_EMPLOYEE                             â”‚         â”‚
â”‚    â”‚ âœ… UPDATE_EMPLOYEE                             â”‚         â”‚
â”‚    â”‚ âœ… UPDATE_EMPLOYEE_SALARY                      â”‚         â”‚
â”‚    â”‚ âœ… DELETE_EMPLOYEE                             â”‚         â”‚
â”‚    â”‚ âœ… VIEW_EMPLOYEE                               â”‚         â”‚
â”‚    â”‚ âœ… APPROVE_LEAVE                               â”‚         â”‚
â”‚    â”‚ âœ… REJECT_LEAVE                                â”‚         â”‚
â”‚    â”‚ âœ… VIEW_AUDIT_LOG                              â”‚         â”‚
â”‚    â”‚ âœ… ALL OPERATIONS                              â”‚         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  Output:                                                         â”‚
â”‚  {                                                               â”‚
â”‚    authorized: true,                                            â”‚
â”‚    admin_id: 101487,                                            â”‚
â”‚    admin_name: "Thamsanqa Moyo",                                â”‚
â”‚    role: "hr_admin",                                            â”‚
â”‚    employer_id: 189  â† Returned for query scoping              â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Authorized âœ“  â”‚
              â”‚  Proceed with  â”‚
              â”‚  operation     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Audit Log     â”‚
              â”‚  Created       â”‚
              â”‚  (compliance)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Complete Agent Graph (LangGraph Nodes & Edges)

```
                        ENTRY POINT
                             â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ authenticate_adminâ”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                  [Check admin_context]
                     â†™          â†˜
              Exists           New User
                â†“                â†“
         operation_type    Load from Neo4j
         = "classify"      Set admin_context
                â†“                â†“
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ classify_request  â”‚
                  â”‚  (Enhanced)       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                  [Confidence Check]
                  â†™        â†“        â†˜
         Low (<0.6)   Med/High    Multi-Intent
              â†“          â†“             â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Request  â”‚  â”‚ Route  â”‚  â”‚ Confirm      â”‚
      â”‚ Clarify  â”‚  â”‚   to   â”‚  â”‚ Multi-Intent â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚Specialistâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“        â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â†“
         [END]          â†“             [END]
                        â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ route_to_specialist â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
          [Check operation_type]
        â†™      â†“       â†“        â†˜
    query    crud    leave     bulk
      â†“        â†“       â†“         â†“
   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Queryâ”‚ â”‚CRUD â”‚ â”‚Leave â”‚  â”‚Check complexityâ”‚
   â”‚Agentâ”‚ â”‚Agentâ”‚ â”‚Agent â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜     â†“      â†“
      â†“       â†“        â†“      Simple  Smart
      â”‚       â”‚        â”‚         â†“      â†“
      â”‚       â”‚        â”‚     â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
      â”‚       â”‚        â”‚     â”‚Bulk â”‚ â”‚CSV â”‚
      â”‚       â”‚        â”‚     â”‚Agentâ”‚ â”‚+Planâ”‚
      â”‚       â”‚        â”‚     â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜
      â”‚       â”‚        â”‚        â””â”€â”€â”€â”€â”€â”€â”˜
      â”‚       â”‚        â”‚           â†“
      â”‚       â”‚     [Check approval]
      â”‚       â”‚        â†™        â†˜
      â”‚       â”‚   Required    Not Required
      â”‚       â”‚      â†“            â†“
      â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     [Execute]
      â”‚       â”‚  â”‚Confirm â”‚       â†“
      â”‚       â”‚  â”‚ Human  â”‚     [Return]
      â”‚       â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â†“
      â”‚       â”‚      â†“           [END]
      â”‚       â”‚  [Approve?]
      â”‚       â”‚    â†™    â†˜
      â”‚       â”‚  Yes     No
      â”‚       â”‚   â†“      â†“
      â”‚       â”‚ Execute [END]
      â”‚       â”‚   â†“
      â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Return Result  â”‚
                    â”‚   to User       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                           [END]
```

---

## 13. Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DEVELOPMENT                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Developer Machine                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  langgraph dev                                          â”‚          â”‚
â”‚  â”‚  â”œâ”€ Local server: http://127.0.0.1:2024               â”‚          â”‚
â”‚  â”‚  â”œâ”€ Hot reload enabled                                 â”‚          â”‚
â”‚  â”‚  â”œâ”€ In-memory state (.langgraph_api/)                 â”‚          â”‚
â”‚  â”‚  â””â”€ Studio UI: https://smith.langchain.com/studio/    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â†“                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Neo4j Aura (Cloud)                                    â”‚          â”‚
â”‚  â”‚  - Employer 189 data                                   â”‚          â”‚
â”‚  â”‚  - Employee, Leave, Audit nodes                        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRODUCTION (Future)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  LangGraph Cloud / LangSmith Deployment                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  LangGraph Server (Managed)                            â”‚          â”‚
â”‚  â”‚  â”œâ”€ PostgreSQL for state persistence                   â”‚          â”‚
â”‚  â”‚  â”œâ”€ Horizontal scaling                                 â”‚          â”‚
â”‚  â”‚  â”œâ”€ Production auth (JWT/OAuth)                        â”‚          â”‚
â”‚  â”‚  â””â”€ Monitoring & alerts                                â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                     â†“                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Neo4j Aura Enterprise                                 â”‚          â”‚
â”‚  â”‚  - Multi-employer data                                 â”‚          â”‚
â”‚  â”‚  - Backup & disaster recovery                          â”‚          â”‚
â”‚  â”‚  - Performance monitoring                              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                       â”‚
â”‚  Integration:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   SSO/OIDC   â”‚  â”‚  Slack/Email â”‚  â”‚   HRIS API   â”‚              â”‚
â”‚  â”‚    (Auth)    â”‚  â”‚(Notifications)â”‚  â”‚ (Sync Data)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

This architecture demonstrates:

âœ… **Modular Design** - 4 specialized subagents with clear responsibilities
âœ… **Intelligent Routing** - Enhanced classification with confidence scoring
âœ… **Security-First** - Multi-tenant isolation, RBAC, audit logging
âœ… **Scalability** - Handles 5000 records with batch processing
âœ… **Flexibility** - Simple bulk for clean data, smart CSV for messy data
âœ… **Production-Ready** - Human-in-the-loop, error handling, observability

**The system is designed for real-world HR operations with enterprise-grade security and reliability.** ğŸ¢âœ¨
